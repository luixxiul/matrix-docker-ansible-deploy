# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2018-2025, Slavi Pantaleev, Aine Etke, MDAD community members
# This file is distributed under the same license as the matrix-docker-ansible-deploy package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: matrix-docker-ansible-deploy \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-03-31 06:51+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../docs/configuring-playbook-matrix-media-repo.md:10
msgid "Storing Matrix media files using matrix-media-repo (optional)"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:12
msgid "The playbook can install and configure [matrix-media-repo](https://docs.t2bot.io/matrix-media-repo/) (often abbreviated \"MMR\") for you."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:14
msgid "MMR is a highly customizable multi-domain media repository for Matrix. Intended for medium to large environments consisting of several homeservers, this media repo de-duplicates media (including remote media) while being fully compliant with the specification."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:16
msgid "**Notes**:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:17
msgid "If MMR is enabled, other media store roles should be disabled (if using Synapse with other media store roles)."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:18
msgid "Smaller/individual homeservers can still make use of this project's features, though it may be difficult to set up or have higher than expected resource consumption. Please do your research before deploying this as this project may not be useful for your environment."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:19
msgid "For a simpler alternative (which allows you to offload your media repository storage to S3, etc.), you can [configure S3 storage](configuring-playbook-s3.md) instead of setting up matrix-media-repo."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:21
msgid "Adjusting the playbook configuration"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:23
msgid "To enable matrix-media-repo, add the following configuration to your `inventory/host_vars/matrix.example.com/vars.yml` file:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:29
msgid "By default, the media-repo will use the local filesystem for data storage. You can alternatively use a `s3` cloud backend as well. Access token caching is also enabled by default since the logout endpoints are proxied through the media repo."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:31
msgid "Enable metrics"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:33
msgid "The playbook can enable and configure the metrics of the service for you."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:35
msgid "Metrics are **only enabled by default** if the builtin [Prometheus](configuring-playbook-prometheus-grafana.md) is enabled (by default, Prometheus isn't enabled). If so, metrics will automatically be collected by Prometheus and made available in Grafana. You will, however, need to set up your own Dashboard for displaying them."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:37
msgid "To enable the metrics, add the following configuration to your `vars.yml` file:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:44
msgid "**To collect metrics from an external Prometheus server**, besides enabling metrics as described above, you will also need to enable metrics exposure on `https://matrix.example.com/metrics/matrix-media-repo` by adding the following configuration to your `vars.yml` file:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:50
msgid "By default metrics are exposed publicly **without** password-protection. To password-protect the metrics with dedicated credentials, add the following configuration to your `vars.yml` file:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:57
msgid "To `matrix_media_repo_container_labels_traefik_metrics_middleware_basic_auth_users`, set the Basic Authentication credentials (raw `htpasswd` file content) used to protect the endpoint. See https://doc.traefik.io/traefik/middlewares/http/basicauth/#users for details about it."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:59
msgid "**Note**: alternatively, you can use `matrix_metrics_exposure_enabled` to expose all services on this `/metrics/*` feature, and you can use `matrix_metrics_exposure_http_basic_auth_enabled` and `matrix_metrics_exposure_http_basic_auth_users` to password-protect the metrics of them. See [this section](configuring-playbook-prometheus-grafana.md#collecting-metrics-to-an-external-prometheus-server) for more information."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:61
msgid "Enable Grafana (optional)"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:63
msgid "Probably you wish to enable Grafana along with Prometheus for generating graphs of the metics."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:65
msgid "To enable Grafana, see [this section](configuring-playbook-prometheus-grafana.md#adjusting-the-playbook-configuration-grafana) for instructions."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:67
msgid "Extending the configuration"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:69
msgid "There are some additional things you may wish to configure about the component."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:71
msgid "Take a look at:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:73
msgid "`roles/custom/matrix-media-repo/defaults/main.yml` for some variables that you can customize via your `vars.yml` file"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:75
msgid "Here is a list of additional common configuration options:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:132
msgid "Signing Keys"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:134
msgid "Authenticated media endpoints ([MSC3916](https://github.com/matrix-org/matrix-spec-proposals/pull/3916)) requires MMR to have a configured signing key to authorize outbound federation requests. Additionally, the signing key must be merged with your homeserver's signing key file."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:136
msgid "The playbook default is to generate a MMR signing key when invoking the setup role and merge it with your homeserver if you are using Synapse or Dendrite. This can be disabled if desired by setting the option in your inventory:"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:142
msgid "If you wish to manually generate the signing key and merge it with your homeserver's signing key file, see https://docs.t2bot.io/matrix-media-repo/v1.3.5/installation/signing-key/ for more details."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:144
msgid "**Note that if you uninstall MMR from the playbook, it will not remove the old MMR signing key from your homeserver's signing key file. You will have to remove it manually.**"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:146
msgid "Key backup and revoking"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:148
msgid "Since your homeserver signing key file is modified by the playbook, a backup will be created in `HOMESERVER_DIR/config/example.com.signing.key.backup`. If you need to remove/revoke old keys, you can restore from this backup or remove the MMR key ID from your `example.com.signing.key` file."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:150
msgid "Additionally, its recommended after revoking a signing key to update your homeserver config file (`old_signing_keys` field for Synapse and `old_private_keys` for Dendrite). See your homeserver config file for further documentation on how to populate the field."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:152
msgid "Importing data from an existing media store"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:154
msgid "If you want to add this repo to an existing homeserver managed by the playbook, you will need to import existing media into MMR's database or you will lose access to older media while it is active. MMR versions up to `v1.3.3` only support importing from Synapse, but newer versions (at time of writing: only `latest`) also support importing from Dendrite."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:156
msgid "**Before importing**: ensure you have an initial matrix-media-repo deployment by following the [quickstart](#quickstart) guide above"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:158
msgid "Depending on the homeserver implementation yu're using (Synapse, Dendrite), you'll need to use a different import tool (part of matrix-media-repo) and point it to the homeserver's database."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:160
msgid "Importing data from the Synapse media store"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:162
msgid "To import the Synapse media store, you're supposed to invoke the `import_synapse` tool which is part of the matrix-media-repo container image. Your Synapse database is called `synapse` by default, unless you've changed it by modifying `matrix_synapse_database_database`."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:164
msgid "This guide here is adapted from the [upstream documentation about the import_synapse script](https://github.com/turt2live/matrix-media-repo#importing-media-from-synapse)."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:166
#: ../../../docs/configuring-playbook-matrix-media-repo.md:188
msgid "Run the following command on the server (after replacing `postgres_connection_password` in it with the value found in your `vars.yml` file):"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:178
#: ../../../docs/configuring-playbook-matrix-media-repo.md:200
msgid "Enter `1` for the Machine ID when prompted (you are not doing any horizontal scaling) unless you know what you're doing."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:180
#: ../../../docs/configuring-playbook-matrix-media-repo.md:202
msgid "This should output a `msg=\"Import completed\"` when finished successfully!"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:182
msgid "Importing data from the Dendrite media store"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:184
msgid "If you're using the [Dendrite](configuring-playbook-dendrite.md) homeserver instead of the default for this playbook (Synapse), follow this importing guide here."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:186
msgid "To import the Dendrite media store, you're supposed to invoke the `import_dendrite` tool which is part of the matrix-media-repo container image. Your Dendrite database is called `dendrite_mediaapi` by default, unless you've changed it by modifying `matrix_dendrite_media_api_database`."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:204
msgid "Troubleshooting"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:206
msgid "As with all other services, you can find the logs in [systemd-journald](https://www.freedesktop.org/software/systemd/man/systemd-journald.service.html) by logging in to the server with SSH and running `journalctl -fu matrix-media-repo`."
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:208
msgid "Increase logging verbosity"
msgstr ""

#: ../../../docs/configuring-playbook-matrix-media-repo.md:210
msgid "If you want to turn on sentry's built-in debugging, add the following configuration to your `vars.yml` file and re-run the playbook:"
msgstr ""
